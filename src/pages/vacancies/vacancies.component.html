<div class="content">
  <div class="nav-area">
    <div class="title-container">
      <h5> Estacionamento </h5>
      <h4> {{ enterpriseName }} </h4>
    </div>
    <div class="hour-container">
      <h5> {{ day }} de {{ month }} de {{ year }}</h5>
      <h4>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 21 21" fill="none">
          <path
            d="M7.5 3V1.5H12.5V3H7.5ZM9.25 12H10.75V7H9.25V12ZM10 18C9.02778 18 8.11861 17.8159 7.2725 17.4477C6.42639 17.0797 5.68688 16.5791 5.05396 15.946C4.4209 15.3131 3.92035 14.5736 3.55229 13.7275C3.1841 12.8814 3 11.9722 3 11C3 10.0278 3.1841 9.11861 3.55229 8.2725C3.92035 7.42639 4.4209 6.68688 5.05396 6.05396C5.68688 5.4209 6.42639 4.92035 7.2725 4.55229C8.11861 4.1841 9.02472 4 9.99083 4C10.8003 4 11.5771 4.13542 12.3212 4.40625C13.0654 4.67708 13.7569 5.05556 14.3958 5.54167L15.4792 4.47917L16.5208 5.52083L15.4583 6.60417C15.9444 7.22917 16.3229 7.91535 16.5938 8.66271C16.8646 9.41007 17 10.1901 17 11.0029C17 11.9732 16.8159 12.8814 16.4477 13.7275C16.0797 14.5736 15.5791 15.3131 14.946 15.946C14.3131 16.5791 13.5736 17.0797 12.7275 17.4477C11.8814 17.8159 10.9722 18 10 18ZM10 16.5C11.5278 16.5 12.8264 15.9653 13.8958 14.8958C14.9653 13.8264 15.5 12.5278 15.5 11C15.5 9.47222 14.9653 8.17361 13.8958 7.10417C12.8264 6.03472 11.5278 5.5 10 5.5C8.47222 5.5 7.17361 6.03472 6.10417 7.10417C5.03472 8.17361 4.5 9.47222 4.5 11C4.5 12.5278 5.03472 13.8264 6.10417 14.8958C7.17361 15.9653 8.47222 16.5 10 16.5Z"
            fill="black" />
        </svg> {{ time }}
      </h4>
    </div>
  </div>

  <div class="mode-select-container">
    <button class="mode" (click)="changeViewMode('frame')">
      @if(!tableMode) {
      <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 18 18" fill="none">
        <path
          d="M2 18C1.45 18 0.979167 17.8042 0.5875 17.4125C0.195833 17.0208 0 16.55 0 16V2C0 1.45 0.195833 0.979167 0.5875 0.5875C0.979167 0.195833 1.45 0 2 0H16C16.55 0 17.0208 0.195833 17.4125 0.5875C17.8042 0.979167 18 1.45 18 2V16C18 16.55 17.8042 17.0208 17.4125 17.4125C17.0208 17.8042 16.55 18 16 18H2ZM2 16H5.325V12.675H2V16ZM7.325 16H10.675V12.675H7.325V16ZM12.675 16H16V12.675H12.675V16ZM2 10.675H5.325V7.325H2V10.675ZM7.325 10.675H10.675V7.325H7.325V10.675ZM12.675 10.675H16V7.325H12.675V10.675ZM2 5.325H5.325V2H2V5.325ZM7.325 5.325H10.675V2H7.325V5.325ZM12.675 5.325H16V2H12.675V5.325Z"
          fill="#000" />
      </svg>
      } @else {
      <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 18 18" fill="none">
        <path
          d="M2 18C1.45 18 0.979167 17.8042 0.5875 17.4125C0.195833 17.0208 0 16.55 0 16V2C0 1.45 0.195833 0.979167 0.5875 0.5875C0.979167 0.195833 1.45 0 2 0H16C16.55 0 17.0208 0.195833 17.4125 0.5875C17.8042 0.979167 18 1.45 18 2V16C18 16.55 17.8042 17.0208 17.4125 17.4125C17.0208 17.8042 16.55 18 16 18H2ZM2 16H5.325V12.675H2V16ZM7.325 16H10.675V12.675H7.325V16ZM12.675 16H16V12.675H12.675V16ZM2 10.675H5.325V7.325H2V10.675ZM7.325 10.675H10.675V7.325H7.325V10.675ZM12.675 10.675H16V7.325H12.675V10.675ZM2 5.325H5.325V2H2V5.325ZM7.325 5.325H10.675V2H7.325V5.325ZM12.675 5.325H16V2H12.675V5.325Z"
          fill="#B1B1B1" />
      </svg>
      }
    </button>
    <button class="mode" (click)="changeViewMode('table')">
      @if(!tableMode){
      <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 14 12" fill="none">
        <path d="M0 12V10H18V12H0ZM0 7V5H18V7H0ZM0 2V0H18V2H0Z" fill="#B1B1B1" />
      </svg>
      } @else {
      <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 14 12" fill="none">
        <path d="M0 12V10H18V12H0ZM0 7V5H18V7H0ZM0 2V0H18V2H0Z" fill="#000" />
      </svg>
      }
    </button>
  </div>

  @if(!tableMode) {
  <div class="vacancies-frame-container">
    @for (vacancy of vacancies; track $index) {
    <div class="vacancy">
      <div #vacancyIntro class="vacancy-intro" [ngClass]="vacancy.status == 'occupied' ? 'red' : ''"
        (click)="vacancyClick(vacancy)">
        <span class="number"> <b> {{ vacancy.id }} </b> </span>
        @if(vacancy.status == 'occupied') {
        <svg xmlns="http://www.w3.org/2000/svg" width="26" height="23" viewBox="0 0 26 23" fill="none">
          <path
            d="M4.25 19.8333V21.25C4.25 21.6514 4.11424 21.9878 3.84271 22.2594C3.57118 22.5309 3.23472 22.6667 2.83333 22.6667H1.41667C1.01528 22.6667 0.678819 22.5309 0.407292 22.2594C0.135764 21.9878 0 21.6514 0 21.25V9.91667L2.975 1.41667C3.11667 0.991667 3.37049 0.649306 3.73646 0.389583C4.10243 0.129861 4.50972 0 4.95833 0H20.5417C20.9903 0 21.3976 0.129861 21.7635 0.389583C22.1295 0.649306 22.3833 0.991667 22.525 1.41667L25.5 9.91667V21.25C25.5 21.6514 25.3642 21.9878 25.0927 22.2594C24.8212 22.5309 24.4847 22.6667 24.0833 22.6667H22.6667C22.2653 22.6667 21.9288 22.5309 21.6573 22.2594C21.3858 21.9878 21.25 21.6514 21.25 21.25V19.8333H4.25ZM3.96667 7.08333H21.5333L20.0458 2.83333H5.45417L3.96667 7.08333ZM6.375 15.5833C6.96528 15.5833 7.46701 15.3767 7.88021 14.9635C8.2934 14.5503 8.5 14.0486 8.5 13.4583C8.5 12.8681 8.2934 12.3663 7.88021 11.9531C7.46701 11.5399 6.96528 11.3333 6.375 11.3333C5.78472 11.3333 5.28299 11.5399 4.86979 11.9531C4.4566 12.3663 4.25 12.8681 4.25 13.4583C4.25 14.0486 4.4566 14.5503 4.86979 14.9635C5.28299 15.3767 5.78472 15.5833 6.375 15.5833ZM19.125 15.5833C19.7153 15.5833 20.217 15.3767 20.6302 14.9635C21.0434 14.5503 21.25 14.0486 21.25 13.4583C21.25 12.8681 21.0434 12.3663 20.6302 11.9531C20.217 11.5399 19.7153 11.3333 19.125 11.3333C18.5347 11.3333 18.033 11.5399 17.6198 11.9531C17.2066 12.3663 17 12.8681 17 13.4583C17 14.0486 17.2066 14.5503 17.6198 14.9635C18.033 15.3767 18.5347 15.5833 19.125 15.5833ZM2.83333 17H22.6667V9.91667H2.83333V17Z"
            fill="#1F1F1F" />
        </svg>
        @if(vacancy.plate) {
        <span class="license-plate"> {{ vacancy.plate }} </span>
        }
        @if(vacancy.clientName) {
        <span class="name"> {{ vacancy.clientName }} </span>
        }
        @if(vacancy.model) {
        <span class="model"> {{ vacancy.model }} </span>
        }
        }
      </div>

      <div #moreData class="more-data" [class.open]="vacancy.expanded" (click)="vacancyClick(vacancy)">
        <span> {{ vacancy.status == 'occupied' ? 'Liberar Vaga?' : 'Ocupar Vaga?'}} </span>
        <div class="button-container">
          <button class="button red" (click)="cancelButton($index)">
            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#f20d18">
              <path
                d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z" />
            </svg>
          </button>
          <button class="button" (click)="confirmButton($index)">
            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#35F387">
              <path d="M382-240 154-468l57-57 171 171 367-367 57 57-424 424Z" />
            </svg>
          </button>
        </div>
      </div>
    </div>
    }
  </div>
  } @else {
  <div class="vacancies-table-container">
    <app-table-list [displayedColumns]="displayedColumns" [dataList]="vacancies" [legends]="legends" [pageSize]="12" [length]="10"/>
  </div>
  }
</div>

<app-spinner *ngIf="isLoading"></app-spinner>